<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      autoReload="true"
      throwExceptions="false"
      internalLogLevel="Trace" internalLogFile="c:\temp\nlog-internal.log">

	<variable name="myvar" value="myvalue"/>

	<targets>
		<target name="db"
        xsi:type="Database"
        connectionString="server=localhost;Database=V2boardSiteNazari;user id=sa;password=0926294733"
        commandType="StoredProcedure"
        commandText="[dbo].[NLog_AddEntry_p]"
        >
			<parameter name="@machineName"      layout="${machinename}" />
			<parameter name="@logged"           layout="${date}" />
			<parameter name="@level"            layout="${level}" />
			<parameter name="@message"          layout="${message}" />
			<parameter name="@logger"           layout="${logger}" />
			<parameter name="@properties"       layout="${all-event-properties:separator=|}" />
			<parameter name="@exception"        layout="${exception:tostring}" />
			<parameter name="@ipAddress"        layout="${mdlc:item=IpAddress}" />
			<parameter name="@requestData"      layout="${mdlc:item=RequestData}" />
			<parameter name="@responseData"     layout="${mdlc:item=ResponseData}" />
			<parameter name="@userId"           layout="${mdlc:item=UserId}" />
			<parameter name="@userName"         layout="${mdlc:item=UserName}" />
			<parameter name="@userRole"         layout="${mdlc:item=UserRole}" />
			<parameter name="@requestUrl"       layout="${mdlc:item=RequestUrl}" />
			<parameter name="@httpMethod"       layout="${mdlc:item=HttpMethod}" />
			<parameter name="@requestHeaders"   layout="${mdlc:item=RequestHeaders}" />
			<parameter name="@userAgent"        layout="${mdlc:item=UserAgent}" />
			<parameter name="@executionTime"    layout="${mdlc:item=ExecutionTime}" />
			<parameter name="@sessionId"        layout="${mdlc:item=SessionId}" />
			<parameter name="@actionName"       layout="${mdlc:item=ActionName}" />
			<parameter name="@controllerName"   layout="${mdlc:item=ControllerName}" />
			<parameter name="@customData"       layout="${mdlc:item=CustomData}" />
		</target>
	</targets>

	<rules>
		<logger name="*" minlevel="Info" writeTo="db" />
	</rules>
</nlog>
